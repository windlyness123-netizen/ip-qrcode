<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPå½’å±åœ°æŸ¥è¯¢ï¼ˆç®€ç‰ˆï¼‰</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }
        body {
            background: linear-gradient(145deg, #eef2f6 0%, #d3dee9 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        .card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 40px;
            box-shadow: 0 20px 36px -12px rgba(0, 30, 60, 0.4);
            width: 100%;
            max-width: 640px;
            padding: 32px 28px;
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        .contact-line {
            text-align: center;
            margin-bottom: 28px;
            font-size: 1rem;
            background: #deeaf6;
            padding: 16px 20px;
            border-radius: 60px;
            border: 1px solid rgba(255,255,255,0.9);
            color: #0f4c75;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        .contact-line strong {
            font-size: 1.3rem;
            color: #b13e3e;
        }
        .info-panel {
            background: #ffffffd9;
            border-radius: 32px;
            padding: 24px;
            box-shadow: inset 0 1px 4px rgba(255,255,255,0.9), 0 8px 18px rgba(0,20,40,0.12);
            margin: 24px 0;
            border: 1px solid rgba(255,255,255,0.8);
        }
        .info-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 18px;
            flex-wrap: wrap;
        }
        .info-label {
            width: 100px;
            font-weight: 600;
            color: #0a3b5c;
            font-size: 0.95rem;
            letter-spacing: 0.3px;
        }
        .info-value {
            flex: 1;
            font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
            background: #ecf3fa;
            padding: 8px 16px;
            border-radius: 40px;
            color: #0b2b42;
            border: 1px solid #b9d0e6;
            word-break: break-word;
        }
        #locationDisplay {
            font-weight: 600;
            background: #d2e6ff;
            color: #004070;
        }
        .update-time {
            text-align: center;
            font-size: 0.95rem;
            color: #2c4b66;
            background: #e5eff9;
            padding: 10px 18px;
            border-radius: 40px;
            border: 1px solid #b9d0e6;
            margin-top: 8px;
        }
        @media (max-width: 480px) {
            .card { padding: 24px 18px; }
            .info-label { width: 85px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div class="card">
        <!-- é¡¶éƒ¨è”ç³»ä¿¡æ¯ -->
        <div class="contact-line">
            ğŸ“¸ æˆªå›¾æœ¬é¡µé¢è”ç³»åœ¨çº¿å®¢æœ &nbsp;&nbsp; æ²¡å›å¤è¯·è‡´ç”µ <strong>18761662888</strong>
        </div>

        <!-- ä¿¡æ¯é¢æ¿ï¼šå½’å±åœ°ã€IPåœ°å€ï¼ˆç»„ç»‡å·²åˆ é™¤ï¼‰ -->
        <div class="info-panel" id="resultPanel">
            <div class="info-row">
                <div class="info-label">ğŸ“ å½’å±åœ°</div>
                <div class="info-value" id="locationDisplay">â€”</div>
            </div>
            <div class="info-row">
                <div class="info-label">ğŸ–¥ï¸ IP åœ°å€</div>
                <div class="info-value" id="ipDisplay">â€”</div>
            </div>
            <!-- ç»„ç»‡è¡Œå·²ç§»é™¤ -->
        </div>

        <!-- æ›´æ–°æ—¶é—´ -->
        <div class="update-time" id="updateTime">â³ æ•°æ®æ›´æ–°ä¸­â€¦</div>
    </div>

    <script>
        (function() {
            // è·å–å…ƒç´ ï¼ˆåªéœ€ä¸¤ä¸ªæ˜¾ç¤ºå­—æ®µï¼‰
            const locationDisplay = document.getElementById('locationDisplay');
            const ipDisplay = document.getElementById('ipDisplay');
            const updateTimeEl = document.getElementById('updateTime');

            // çœä»½è‹±æ–‡ => ä¸­æ–‡æ˜ å°„
            const provinceMap = {
                'Anhui': 'å®‰å¾½', 'Beijing': 'åŒ—äº¬', 'Chongqing': 'é‡åº†', 'Fujian': 'ç¦å»º',
                'Gansu': 'ç”˜è‚ƒ', 'Guangdong': 'å¹¿ä¸œ', 'Guangxi': 'å¹¿è¥¿', 'Guizhou': 'è´µå·',
                'Hainan': 'æµ·å—', 'Hebei': 'æ²³åŒ—', 'Heilongjiang': 'é»‘é¾™æ±Ÿ', 'Henan': 'æ²³å—',
                'Hong Kong': 'é¦™æ¸¯', 'Hubei': 'æ¹–åŒ—', 'Hunan': 'æ¹–å—', 'Inner Mongolia': 'å†…è’™å¤',
                'Jiangsu': 'æ±Ÿè‹', 'Jiangxi': 'æ±Ÿè¥¿', 'Jilin': 'å‰æ—', 'Liaoning': 'è¾½å®',
                'Macau': 'æ¾³é—¨', 'Ningxia': 'å®å¤', 'Qinghai': 'é’æµ·', 'Shaanxi': 'é™•è¥¿',
                'Shandong': 'å±±ä¸œ', 'Shanghai': 'ä¸Šæµ·', 'Shanxi': 'å±±è¥¿', 'Sichuan': 'å››å·',
                'Taiwan': 'å°æ¹¾', 'Tianjin': 'å¤©æ´¥', 'Tibet': 'è¥¿è—', 'Xinjiang': 'æ–°ç–†',
                'Yunnan': 'äº‘å—', 'Zhejiang': 'æµ™æ±Ÿ'
            };

            // éƒ¨åˆ†åŸå¸‚è‹±æ–‡ => ä¸­æ–‡æ˜ å°„
            const cityMap = {
                'Nanjing': 'å—äº¬',
                'Beijing': 'åŒ—äº¬',
                'Shanghai': 'ä¸Šæµ·',
                'Guangzhou': 'å¹¿å·',
                'Shenzhen': 'æ·±åœ³',
                'Chengdu': 'æˆéƒ½',
                'Wuhan': 'æ­¦æ±‰',
                'Hangzhou': 'æ­å·',
                'Xi\'an': 'è¥¿å®‰',
                'Chongqing': 'é‡åº†'
            };

            function getCountryChinese(countryCode, countryNameEn) {
                if (countryCode === 'CN') return 'ä¸­å›½';
                return countryNameEn;
            }

            function formatLocationChinese(data) {
                const countryCode = data.country_code || '';
                const countryEn = data.country || '';
                const regionEn = data.region || '';
                const cityEn = data.city || '';

                const country = getCountryChinese(countryCode, countryEn);
                
                let region = regionEn;
                if (regionEn && provinceMap[regionEn]) {
                    region = provinceMap[regionEn];
                }
                
                let city = cityEn;
                if (cityEn && cityMap[cityEn]) {
                    city = cityMap[cityEn];
                }

                let parts = [country];
                if (region) parts.push(region);
                if (city && city !== region) parts.push(city);
                return parts.join(' ');
            }

            async function fetchGeoInfo() {
                try {
                    const response = await fetch('https://api.ip.sb/geoip', {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }

                    const data = await response.json();
                    console.log('APIå“åº”:', data);

                    const ip = data.ip || 'â€”';
                    const locationChinese = formatLocationChinese(data);

                    // æ›´æ–°ä¿¡æ¯ï¼ˆä¸å†æ›´æ–°ç»„ç»‡ï¼‰
                    locationDisplay.textContent = locationChinese;
                    ipDisplay.textContent = ip;

                    // æ›´æ–°æ—¶é—´
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString('zh-CN', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    updateTimeEl.textContent = `âœ… æ•°æ®æ›´æ–°äº ${timeStr}`;

                } catch (error) {
                    console.error('APIè¯·æ±‚å¤±è´¥:', error);
                    locationDisplay.textContent = 'â€”';
                    ipDisplay.textContent = 'â€”';
                    updateTimeEl.textContent = 'âŒ æ•°æ®æ›´æ–°å¤±è´¥';
                }
            }

            // é¡µé¢åŠ è½½è‡ªåŠ¨è·å–
            fetchGeoInfo();
        })();
    </script>
</body>
</html>
